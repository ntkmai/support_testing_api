{
  "requests": [
    {
      "name": "Login - Nhân viên",
      "method": "POST",
      "endpoint": "/api/auth/login",
      "description": "## Mục đích\nĐăng nhập để nhận JWT token\n\n## Test Accounts\n- Nhân viên: 55555/55555\n- Giám đốc: 0018/0018\n- Chủ tịch: 0025/0025\n- HĐQT: 44444/44444",
      "headers": {
        "Content-Type": "application/json"
      },
      "body": {
        "username": "55555",
        "password": "55555"
      },
      "templates": [
        {
          "name": "Nhân viên (55555)",
          "description": "Login nhân viên - Tạo/sửa JAR",
          "body": {
            "username": "55555",
            "password": "55555"
          }
        },
        {
          "name": "Giám đốc (0018)",
          "description": "Login giám đốc - Phê duyệt Level 1",
          "body": {
            "username": "0018",
            "password": "0018"
          }
        },
        {
          "name": "Chủ tịch (0025)",
          "description": "Login chủ tịch - Phê duyệt Level 2",
          "body": {
            "username": "0025",
            "password": "0025"
          }
        },
        {
          "name": "HĐQT (44444)",
          "description": "Login chủ tịch HĐQT - Phê duyệt Level 3",
          "body": {
            "username": "44444",
            "password": "44444"
          }
        }
      ]
    },
    {
      "name": "Health Check",
      "method": "GET",
      "endpoint": "/api/health",
      "description": "## Mục đích\nKiểm tra server đang chạy"
    },
    {
      "name": "Get All JAR Ratios",
      "method": "GET",
      "endpoint": "/api/jar-ratios?page=1&limit=10",
      "description": "## Mục đích\nLấy danh sách JAR Ratio (có pagination)\n\n## Response\nMảng data + pagination info",
      "headers": {
        "Accept": "application/json",
        "Authorization": "Bearer YOUR_TOKEN_HERE"
      }
    },
    {
      "name": "Get JAR Ratio by ID",
      "method": "GET",
      "endpoint": "/api/jar-ratios/{id}",
      "description": "## Mục đích\nLấy chi tiết một JAR Ratio theo ID\n\n## Note\nThay {id} bằng ID thực tế (ví dụ: jr_001)",
      "headers": {
        "Accept": "application/json",
        "Authorization": "Bearer YOUR_TOKEN_HERE"
      }
    },
    {
      "name": "Create JAR Ratio",
      "method": "POST",
      "endpoint": "/api/jar-ratios",
      "description": "## Mục đích\nTạo mới JAR Ratio cho tháng/năm\n\n## Validation nghiêm ngặt\n- Tổng ratio = 100%\n- Không trùng jar_id\n- Không trùng month/year\n\n## Status sau tạo: waiting_director",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer YOUR_TOKEN_HERE"
      },
      "body": {
        "month": 12,
        "year": 2025,
        "note": "Tỷ lệ tháng 12/2025",
        "details": [
          {
            "jar_id": "jar_001",
            "ratio": 40,
            "planned_revenue": 100000000,
            "minimum_cost": 30000000
          },
          {
            "jar_id": "jar_002",
            "ratio": 35,
            "planned_revenue": 80000000,
            "minimum_cost": 25000000
          },
          {
            "jar_id": "jar_003",
            "ratio": 25,
            "planned_revenue": 60000000,
            "minimum_cost": 15000000
          }
        ]
      },
      "templates": [
        {
          "name": "Happy Path - Tổng 100%",
          "description": "Tạo thành công",
          "body": {
            "month": 12,
            "year": 2025,
            "note": "Tỷ lệ tháng 12/2025",
            "details": [
              {
                "jar_id": "jar_001",
                "ratio": 40,
                "planned_revenue": 100000000,
                "minimum_cost": 30000000
              },
              {
                "jar_id": "jar_002",
                "ratio": 35,
                "planned_revenue": 80000000,
                "minimum_cost": 25000000
              },
              {
                "jar_id": "jar_003",
                "ratio": 25,
                "planned_revenue": 60000000,
                "minimum_cost": 15000000
              }
            ]
          }
        },
        {
          "name": "Error - Tổng ratio ≠ 100% (75%)",
          "description": "Test validation error",
          "body": {
            "month": 12,
            "year": 2025,
            "note": "Test lỗi ratio",
            "details": [
              {
                "jar_id": "jar_001",
                "ratio": 40
              },
              {
                "jar_id": "jar_002",
                "ratio": 35
              }
            ]
          }
        },
        {
          "name": "Error - Trùng jar_id",
          "description": "Test trùng lọ",
          "body": {
            "month": 12,
            "year": 2025,
            "note": "Test trùng jar",
            "details": [
              {
                "jar_id": "jar_001",
                "ratio": 50
              },
              {
                "jar_id": "jar_001",
                "ratio": 50
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Update JAR Ratio",
      "method": "PUT",
      "endpoint": "/api/jar-ratios/{id}",
      "description": "## Mục đích\nCập nhật JAR Ratio (chỉ khi status draft/rejected)\n\n## Note\nThay {id} bằng ID thực tế\nBody chỉ cần các field muốn cập nhật",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer YOUR_TOKEN_HERE"
      },
      "templates": [
        {
          "name": "Cập nhật note",
          "body": {
            "note": "Note mới sau chỉnh sửa"
          }
        },
        {
          "name": "Cập nhật details (tỷ lệ mới)",
          "body": {
            "details": [
              {
                "jar_id": "jar_001",
                "ratio": 50,
                "planned_revenue": 120000000,
                "minimum_cost": 40000000
              },
              {
                "jar_id": "jar_002",
                "ratio": 30
              },
              {
                "jar_id": "jar_003",
                "ratio": 20
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Approve / Reject JAR Ratio",
      "method": "PUT",
      "endpoint": "/api/jar-ratios/{id}/approve",
      "description": "## Mục đích\nPhê duyệt hoặc từ chối tại cấp hiện tại\n\n## Quyền theo status\n- waiting_director → chỉ Giám đốc\n- waiting_president → chỉ Chủ tịch\n- waiting_board_chairman → chỉ HĐQT\n\n## Note\nThay {id} bằng ID thực tế",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer YOUR_TOKEN_HERE"
      },
      "body": {
        "status": "approved",
        "note": "Đã duyệt"
      },
      "templates": [
        {
          "name": "Phê duyệt (Approved)",
          "description": "Chuyển sang cấp tiếp theo hoặc approved cuối",
          "body": {
            "status": "approved",
            "note": "Đồng ý với đề xuất tỷ lệ"
          }
        },
        {
          "name": "Từ chối (Rejected)",
          "description": "Từ chối → status rejected, có thể sửa lại",
          "body": {
            "status": "rejected",
            "note": "Tỷ lệ chưa phù hợp, cần điều chỉnh"
          }
        }
      ]
    },
    {
      "name": "Delete JAR Ratio",
      "method": "DELETE",
      "endpoint": "/api/jar-ratios/{id}",
      "description": "## Mục đích\nXóa JAR Ratio (chỉ draft/rejected)\n\n## Note\nThay {id} bằng ID thực tế",
      "headers": {
        "Authorization": "Bearer YOUR_TOKEN_HERE"
      }
    },
    {
      "name": "Get Approval History",
      "method": "GET",
      "endpoint": "/api/jar-ratios/{id}/history",
      "description": "## Mục đích\nXem lịch sử phê duyệt chi tiết\n\n## Note\nThay {id} bằng ID thực tế",
      "headers": {
        "Accept": "application/json",
        "Authorization": "Bearer YOUR_TOKEN_HERE"
      }
    },
    {
      "name": "Get JAR Ratios for Mobile",
      "method": "GET",
      "endpoint": "/api/jar-ratios/mobile",
      "description": "## Mục đích\nDanh sách JAR Ratio tối ưu cho mobile app",
      "headers": {
        "Authorization": "Bearer YOUR_TOKEN_HERE"
      }
    },
    {
      "name": "Get Creators List",
      "method": "GET",
      "endpoint": "/api/jar-ratios/creators",
      "description": "## Mục đích\nLấy danh sách người tạo JAR Ratio",
      "headers": {
        "Authorization": "Bearer YOUR_TOKEN_HERE"
      }
    },
    {
      "name": "Get Jars List",
      "method": "GET",
      "endpoint": "/api/jars",
      "description": "## Mục đích\nLấy danh sách các lọ (jar) để chọn khi tạo",
      "headers": {
        "Authorization": "Bearer YOUR_TOKEN_HERE"
      }
    }
  ],
  "baseUrl": "http://localhost:3000",
  "metadata": {
    "name": "JAR Ratio Management API",
    "version": "1.0",
    "description": "API Quản lý Tỷ Lệ Lọ - Workflow phê duyệt 3 cấp với validation nghiêm ngặt và tracking lịch sử",
    "created": "2025-12-15",
    "accounts": {
      "employee": "55555/55555",
      "director": "0018/0018",
      "president": "0025/0025",
      "board_chairman": "44444/44444"
    }
  }
}